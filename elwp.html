<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Timeline Component</title>
    <style>
      /* CSS Variables for theming */
      :root {
        --color-forest-green: #2d5016;
        --text-heading: #1a1a1a;
        --text-base: #333333;
      }

      /* Reset and base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
          "Oxygen", "Ubuntu", "Cantarell", sans-serif;
        line-height: 1.6;
        color: var(--text-base);
      }

      /* Home Button Styles */
      .home-button-container {
        padding: 20px;
        display: flex;
        justify-content: flex-start;
      }

      .home-button {
        background: rgba(0, 0, 0, 0.2);
        color: black;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
        text-align: center;
        font-size: 20px;
        font-family: "Bree Serif", serif;
        transition: background-color 0.3s ease;
      }

      .home-button:hover {
        background-color: rgb(198, 241, 195);
      }

      /* Timeline Section Styles */
      .timeline-section {
        width: 100%;
        padding: 3rem 1rem;
        position: relative;
      }

      .timeline-container {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        overflow: visible;
        min-height: 200px;
      }

      .timeline-title {
        font-size: 1.5rem;
        font-weight: 700;
        text-align: center;
        color: var(--text-heading);
        margin-bottom: 2rem;
      }

      /* Timeline Item Styles */
      .timeline-item {
        position: absolute;
        width: 50px;
        height: 50px;
        border: 2px solid var(--color-forest-green);
        border-radius: 50%;
        background-color: white;
        color: var(--color-forest-green);
        font-weight: 400;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: all 0.4s ease;
        transform-origin: center center;
        user-select: none;
        z-index: 2;
      }

      .timeline-item:hover {
        transform: scale(1.1);
      }

      .timeline-item.active {
        background-color: var(--color-forest-green);
        color: white;
      }

      /* Timeline Content Styles */
      .timeline-content {
        max-width: 48rem;
        margin: 0 auto 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
        font-family: sans-serif;
        font-weight: normal;
        color: var(--text-base);
      }

      .timeline-content p {
        text-align: center;
        margin-bottom: 1.5rem;
        line-height: 1.6;
      }

      /* See More Button Styles */
      .see-more-button {
        background-color: transparent;
        border: 2px solid var(--color-forest-green);
        color: var(--color-forest-green);
        padding: 0.75rem 1.5rem;
        border-radius: 0.375rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
      }

      .see-more-button:hover {
        background-color: var(--color-forest-green);
        color: white;
      }

      /* Line Divider Styles */
      .line-divider {
        width: 100%;
        margin: 1.5rem 0;
        height: auto;
        position: absolute;
        top: 40%;
        left: 0;
        transform: translateY(-50%);
        z-index: 1;
      }

      /* Responsive Design */
      @media (max-width: 640px) {
        .timeline-item {
          width: 40px;
          height: 40px;
          opacity: 1;
        }
      }

      /* Accessibility */
      .timeline-item:focus {
        outline: 2px solid var(--color-forest-green);
        outline-offset: 2px;
      }
    </style>
  </head>
  <body>
    <div class="home-button-container">
      <button class="home-button" onclick="window.location.href='index.html'">
        Home
      </button>
    </div>
    <section class="timeline-section" aria-label="Timeline of work">
      <h1 class="timeline-title">
        East London Waterworks Parks volunteering web development site
      </h1>
      <h2 class="timeline-title">Timeline of work</h2>
      <div class="timeline-container" role="list" id="timelineContainer">
        <!-- Timeline items will be dynamically generated here -->
        <svg
          width="100%"
          height="120"
          viewBox="0 0 1440 120"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="line-divider"
        >
          <path
            d="
          M0 20
          C 480 80 960 80 1440 20
          "
            stroke="#01735B99"
            stroke-width="2"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </div>
      <div class="timeline-content" id="timelineContent">
        <p id="timelineDescription">
          Here comes the medium-length description of the timeline component for
          2022. Here comes the medium-length description of the timeline
          component for 2022. Here comes the medium-length description of the
          timeline component for 2022. Here comes the medium-length description
          of the timeline component for 2022. Here comes the medium-length
          description of the timeline component for 2022. Here comes the
          medium-length description of the timeline component for 2022. Here
          comes the medium-length description of the timeline component for
          2022. Here comes the medium-length description of the timeline
          component for 2022.
        </p>
        <p id="timelineDescriptionExtended" style="display: none">
          Here comes the medium-length description of the timeline component for
          2022. Here comes the medium-length description of the timeline
          component for 2022. Here comes the medium-length description of the
          timeline component for 2022. Here comes the medium-length description
          of the timeline component for 2022. Here comes the medium-length
          description of the timeline component for 2022. Here comes the
          medium-length description of the timeline component for 2022. Here
          comes the medium-length description of the timeline component for
          2022. Here comes the medium-length description of the timeline
          component for 2022.
        </p>
        <button
          class="see-more-button"
          id="seeMoreButton"
          onclick="handleSeeMore()"
        >
          See more
        </button>
      </div>
    </section>

    <script>
      // Timeline Configuration
      const TIMELINE_CONFIG = {
        years: [2019, 2020, 2021, 2022, 2023, 2024, 2025],
        defaultYear: 2022,
        description:
          "Here comes the medium-length description of the timeline component for",
      };

      // State management
      let activeIndex = TIMELINE_CONFIG.years.indexOf(
        TIMELINE_CONFIG.defaultYear
      );
      let isExtended = false;

      // Helper function to calculate position along the curve
      function calculateCurvePosition(index, totalItems, activeIndex) {
        const basePosition = index / (totalItems - 1);
        let xPos;

        if (window.innerWidth <= 640) {
          // Hardcoded positional values for mobile
          xPos = basePosition * 780 - 380;
        } else {
          xPos = basePosition * 1440 - 720;
        }

        const yPos = Math.sin(basePosition * Math.PI) * 10 - 5;
        const distanceFromActive = Math.abs(index - activeIndex);
        const scale = Math.max((1 - distanceFromActive) * 1.5, 1);

        return {
          transform: `translate(${xPos}%, ${yPos}px) scale(${scale})`,
          zIndex: index === activeIndex ? 10 : 1,
        };
      }

      // Create timeline item element
      function createTimelineItem(year, index) {
        const item = document.createElement("div");
        item.className = "timeline-item";
        item.setAttribute("role", "button");
        item.setAttribute("tabindex", "0");
        item.setAttribute("aria-label", `Timeline item for year ${year}`);
        item.textContent = year;

        // Add click event
        item.addEventListener("click", () => setActiveIndex(index));

        // Add keyboard event for accessibility
        item.addEventListener("keypress", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            setActiveIndex(index);
          }
        });

        return item;
      }

      // Update timeline item positions
      function updateTimelinePositions() {
        const container = document.getElementById("timelineContainer");
        const items = container.querySelectorAll(".timeline-item");

        items.forEach((item, index) => {
          const position = calculateCurvePosition(
            index,
            TIMELINE_CONFIG.years.length,
            activeIndex
          );

          item.style.transform = position.transform;
          item.style.zIndex = position.zIndex;

          // Update active state
          if (index === activeIndex) {
            item.classList.add("active");
          } else {
            item.classList.remove("active");
          }
        });
      }

      // Update timeline content
      function updateTimelineContent() {
        const description = document.getElementById("timelineDescription");
        const currentYear = TIMELINE_CONFIG.years[activeIndex];

        description.textContent = `${TIMELINE_CONFIG.description} ${currentYear}. ${TIMELINE_CONFIG.description} ${currentYear}. ${TIMELINE_CONFIG.description} ${currentYear}. ${TIMELINE_CONFIG.description} ${currentYear}`;
      }

      // Set active index and update UI
      function setActiveIndex(index) {
        activeIndex = index;
        updateTimelinePositions();
        updateTimelineContent();
        // Reset extended state when changing years
        isExtended = false;
        updateExtendedContent();
      }

      // Handle see more button click
      function handleSeeMore() {
        isExtended = !isExtended;
        updateExtendedContent();
      }

      // Update extended content visibility and button text
      function updateExtendedContent() {
        const descriptionExtended = document.getElementById(
          "timelineDescriptionExtended"
        );
        const seeMoreButton = document.getElementById("seeMoreButton");

        if (isExtended) {
          descriptionExtended.style.display = "block";
          seeMoreButton.textContent = "See less";
        } else {
          descriptionExtended.style.display = "none";
          seeMoreButton.textContent = "See more";
        }
      }

      // Initialize timeline
      function initializeTimeline() {
        const container = document.getElementById("timelineContainer");

        // Create timeline items
        TIMELINE_CONFIG.years.forEach((year, index) => {
          const item = createTimelineItem(year, index);
          container.appendChild(item);
        });

        // Set initial positions and content
        updateTimelinePositions();
        updateTimelineContent();
        updateExtendedContent();
      }

      // Handle window resize for responsive positioning
      function handleResize() {
        updateTimelinePositions();
      }

      // Initialize when DOM is loaded
      document.addEventListener("DOMContentLoaded", function () {
        initializeTimeline();
        window.addEventListener("resize", handleResize);
      });
    </script>
  </body>
</html>
